<template name="tasks">
  <div class="row">
    <div class="col-lg-12">
      {{loginButtons}}
    </div>
  </div>
  <div class="row">
    <div class="col-lg-3">
      {{> task_lists}}
    </div>
    <div class="col-lg-3">
      {{> task_detail}}
    </div>
  </div>
</template>

<template name="task_lists">
  <a class="new_task_list" href="#">New Tasklist</a>
  {{#each task_lists}}
    <h3><input class="task_list_name" value="{{name}}"></h3>
    <input class="task_list_description" value="{{description}}">
    <ul>
      {{#each tasks this }}
        {{> task}}
      {{/each}}
    </ul>
    <button class="new_task">New Task</button>
  {{/each}}
</template>

<template name="task">
  <li class="{{task_class}}">
    <input id="ck{{_id}}" type="checkbox" {{#if done}}checked="checked"{{/if}} >
    <input id="ts{{_id}}" class="task_text" value="{{task_text}}">
  </li>
</template>

<template name="task_detail">
  {{#if task}}
  <input id="dp{{task._id}}" class="datepicker" type="text" value="{{task_due}}">
  <h3>
    <input id="dtck{{task._id}}" type="checkbox" {{#if task.done}}checked="checked"{{/if}}>
    <input class="title" id="dt{{task._id}}" value="{{task_text}}">
  </h3>
  <textarea class="description" id="ds{{task._id}}">{{task.description}}</textarea>

  <input type="text" style="width:100%" id="task_tags" placeholder="Type to set tags" value="{{task_tags}}">

  <ul>
    {{#each task_history_and_comments}}
      <li class="{{type}}">{{userLink user_id}}: {{text}} <em>{{timestamp}}</em></li>
    {{/each}}
    <li>
      <textarea class="newcomment" id="nc{{task._id}}"></textarea>
      <button class="add_comment">Comment</button>
    </li>
  </ul>

  <div id="dropzone" class="dropzone">
    <div style="text-align: center; color: gray;">Drop file to upload</div>
  </div>

  {{#each task_files}}
    {{cfsDownloadButton "Uploads" class="btn btn-primary btn-mini" content=filename}}
    <a class="btn btn-danger btn-mini btnFileDelete">Delete</a>
  {{else}}
    No files uploaded.
  {{/each}}

  <button class="delete_task">Delete this task</button>
  {{/if}}
</template>

<template name="task_comment">
  <p>{{text}}</p>
</template>